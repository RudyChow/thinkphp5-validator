<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta charset="utf-8"/>
        <title>验证器生成器</title>
        <meta name="description" content="overview &amp; stats"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    </head>

    <body>
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>选择</th>
                    <th>数据表</th>
                    <th>数据表注释</th>
                </tr>
            </thead>
            <tbody>
            <form action="{$action}" method="post">
                {volist name="tables" id="vo"}
                <tr>
                    <th><input type="checkbox" class="tables" name="tables[]" value="{$vo.table_name}"/></th>
                    <td>{$vo.table_name}</td>
                    <td>{$vo.table_comment}</td>
                </tr>
                {/volist}
                <tr>
                    <td colspan="3">
                        <input type="hidden" name="override" id="override" value="0"/>
                        <button type="button" class="btn btn-info" id="selectall" data-status="0">全选</button>
                        <button type="button" class="btn btn-info" id="quick-btn">快速生成</button>
                        <button type="button" class="btn btn-primary" id="override-btn">覆盖生成</button>
                    </td>
                </tr>
            </form>
            </tbody>
        </table>
    </body>
</html>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
<script>
    $(function () {
        $('#quick-btn').on('click',function () {
            $('#override').val(0);
            $('form').submit();
        })
        $('#override-btn').on('click',function () {
            if(confirm('此操作会覆盖掉原有的验证器，确定要覆盖吗？')){
                $('#override').val(1);
                $('form').submit();
            }
        })
        $('#selectall').click(function(){
            if($(this).attr('data-status') == 0){
                $('.tables').each(function(){
                    $(this).prop("checked",true);
                });
                $(this).attr('data-status',1);
            }else{
                $('.tables').each(function(){
                    $(this).prop("checked",false);
                });
                $(this).attr('data-status',0);
            }

        });
    })
</script>